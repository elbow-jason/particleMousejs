<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
    <script type="text/javascript" src="./particle.js"></script>
    <script type="text/javascript" src="./emitter.js"></script>
    <script type="text/javascript" src="./particleMath.js"></script>
    <script type="text/javascript" src="./particleWorld.js"></script>
    <script type="text/javascript" src="./particleMain.js"></script>
  </head>
  <body>
    <canvas id="a" width="1000" height="1000" class="clear" 
        style="border:1px dotted;float:left"></canvas>
    
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      var ParticleSystemTest = function() { 
      var world     = new ParticleWorld; 
    
      var makeWorld = function(args) { //expect arg to be array of strings 
        world   = new ParticleWorld(1000, new Vector(500,500)); 
        world.newEmitter(new Vector((1000 / 2), (1000 / 2)), 0, 1000); 
      };

      this.updateXY = function(coordObj){ 
        world.center.x = coordObj.x;
        world.center.y = coordObj.y;
        };
      }

      var canvasWorld       = new ParticleSystemTest();
      var canvasPos         = document.getElementById('a');
      var canvasParticle    = document.getElementById('a');
      var contextPos        = canvasPos       .getContext('2d');
      var contextParticle   = canvasParticle  .getContext('2d');

      canvasPos.addEventListener('mousemove', function(evt) {
        var mousePos = phelper.getMousePos(canvasPos, evt);
        var message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
        phelper.writeMessage(canvasPos, message);
        phelper.drawMousePos(canvasParticle, mousePos);
        canvasWorld.updateXY(mousePos);

      }, false);


      canvasParticle.addEventListener('click', function(evt){
        phelper.clearParticles(canvasParticle);
      }, false);

  });


    </script>
  </body>
</html>